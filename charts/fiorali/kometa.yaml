name: kometa
namespace: downloader
image:
  repository: docker.io/kometateam/kometa
  tag: latest@sha256:7c646da49169eacc3a1e5462af86de2b4176b7a68673cf7996709f431c5fdc7d
deployment:
  enabled: false
resources:
  limits:
    cpu: 250m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 125Mi
service:
  enabled: false
podDisruptionBudget:
  enabled: false
command:
  args: ["--run", "--read-only-config"]
cronjob:
  enabled: true
  schedule: "35 2 * * *"
volumeMounts:
- name: config
  mountPath: /config
- name: assets
  mountPath: /assets
# - name: kometa-configmap
#   mountPath: /config/config.yml
#   subPath: config.yml
#   readOnly: true
- name: kometa-configmap
  mountPath: /config/movies.yml
  subPath: movies.yml
  readOnly: true
- name: kometa-configmap
  mountPath: /config/tv.yml
  subPath: tv.yml
  readOnly: true
volumes:
- name: config
  emptyDir: {}
- name: assets
  emptyDir: {}
- name: tmp
  emptyDir: {}
- name: kometa-configmap
  configMap:
    name: kometa-configmap
    defaultMode: 511
containerSecurityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true
  privileged: false
podSecurityContext:
  fsGroup: 2000
  runAsNonRoot: true
  runAsUser: 1000
networkpolicy:
  egress:
    internet: true
    namespaces: [tautulli]
initContainers:
  enabled: true
  file: "kometa-init.yaml"
configMap:
  enabled: true
  value: |-
    config.yml: |
      libraries:
        Movies:
          collection_files:
            - file: config/movies.yaml
        TV Shows:
          collection_files:
            - file: config/tv.yaml
      settings:
        cache: true
        cache_expiration: 60
        asset_directory: /assets
        asset_folders: true
        asset_depth: 0
        create_asset_folders: false
        dimensional_asset_rename: false
        download_url_assets: false
        show_missing_season_assets: false
        sync_mode: append
        minimum_items: 1
        default_collection_order:
        delete_below_minimum: true
        delete_not_scheduled: false
        run_again_delay: 2
        missing_only_released: false
        only_filter_missing: false
        show_unmanaged: true
        show_filtered: false
        show_options: false
        show_missing: true
        show_missing_assets: true
        save_report: true
        tvdb_language: eng
        ignore_ids:
        ignore_imdb_ids:
        playlist_sync_to_users: all
        verify_ssl: false
      plex:
        url: http://plex.downloader:32400
        token: ${PLEX_TOKEN}
        timeout: 60
        db_cache:
        clean_bundles: false
        empty_trash: false
        optimize: false
      tmdb:
        apikey: ${TMDB_APIKEY}
        language: en
      tautulli:
        url: http://tautulli.tautulli:8181
        apikey: ${TAUTULLI_APIKEY}
      radarr:
        url: http://radarr.downloader:7878
        token: ${RADARR_TOKEN}
        add_missing: false
        root_folder_path: /media-movies-2
        monitor: false
        availability: cinemas
        quality_profile: HD-1080p
        tag: kometa
        add_existing: false
        search: false
        radarr_path:
        plex_path:
      sonarr:
        url: http://sonarr.downloader:8989
        token: ${SONARR_TOKEN}
        add_missing: false
        add_existing: false
        root_folder_path: /media-tv-2
        monitor: pilot
        quality_profile: HD-1080p
        language_profile: English
        series_type: standard
        season_folder: true
        tag: kometa
        search: true
        cutoff_search: false
        sonarr_path:
        plex_path:
    movies.yml: |
      collections:
        Tautulli Most Popular Movies:
          sync_mode: sync
          collection_order: custom
          tautulli_watched:
            list_days: 180
            list_size: 10
            list_minimum: 1
    tv.yml: |
      collections:
        Most Popular:
          smart_label: originally_available.desc
          sync_mode: sync
          imdb_search:
            type: tv_series, tv_mini_series
            limit: 10
          summary: The 10 most popular shows across the internet
          sonarr_add_missing: true
          sonarr_search: true
          sonarr_monitor: pilot
        Tautulli Most Popular:
          sync_mode: sync
          collection_order: custom
          summary: The 10 most popular shows from Plex users
          tautulli_popular:
            list_days: 180
            list_size: 10
