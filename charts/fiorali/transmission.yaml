name: transmission
namespace: downloader
deployment:
  enabled: true
image:
  repository: docker.io/linuxserver/transmission
  tag: latest@sha256:6e77d7a45400f74669980d9df7a979b7229a80912f1d216844043bcfe00e65cc
containerPorts:
- containerPort: 9091
  name: transmission
resources:
  limits:
    cpu: 1500m
    memory: 2Gi
  requests:
    cpu: 1000m
    memory: 1Gi
probes:
  exec:
    command:
    - sh
    - -c
    - if [[ $(pgrep transmission | wc -l) -ne 1 ]]; then exit 1; fi
service:
  enabled: true
  ports:
  - port: 9091
    name: transmission
    targetPort: transmission
env:
- name: PUID
  value: "911"
- name: PGID
  value: "911"
- name: TZ
  value: "America/Toronto"
- name: S6_READ_ONLY_ROOT
  value: "1"
- name: S6_YES_I_WANT_A_WORLD_WRITABLE_RUN_BECAUSE_KUBERNETES
  value: "1"
ingress:
  enabled: true
volumeMounts:
- name: media-bittorrent
  mountPath: /media-bittorrent
- name: transmission
  mountPath: /config
- name: run
  mountPath: /run
volumes:
- name: media-bittorrent
  persistentVolumeClaim:
    claimName: media-bittorrent
- name: transmission
  persistentVolumeClaim:
    claimName: transmission
- name: port-forward
  emptyDir: {}
- name: run
  emptyDir: {}
networkpolicy:
  ingress:
    internal: true
  egress:
    internet: true
initContainers:
  enabled: true
  file: "transmission-init.yaml"
dnsPolicy: "None"
dnsConfig:
  nameservers:
  - 127.0.0.1
volume:
  enabled: true
  size: "1073741824"
containerSecurityContext: {}
# Outstanding bug with s6: https://github.com/just-containers/s6-overlay/issues/600
# containerSecurityContext:
#   allowPrivilegeEscalation: false
#   capabilities:
#     drop:
#     - ALL
#   readOnlyRootFilesystem: true
#   privileged: false
#   runAsUser: 911
podSecurityContext: {} #gluetun needs root access to make changes to network settings
